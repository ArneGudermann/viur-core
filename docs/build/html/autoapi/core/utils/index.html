

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>core.utils &mdash; ViUR Core 3.0.0-b1 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> ViUR Core
          

          
          </a>

          
            
            
              <div class="version">
                3.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">ViUR Core</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_start/index.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_guide/index.html">Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc_tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ViUR Core</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">core.utils</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/autoapi/core/utils/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-core.utils">
<span id="core-utils"></span><h1><a class="reference internal" href="#module-core.utils" title="core.utils"><code class="xref py py-mod docutils literal notranslate"><span class="pre">core.utils</span></code></a><a class="headerlink" href="#module-core.utils" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#core.utils.utcNow" title="core.utils.utcNow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">utcNow</span></code></a>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#core.utils.generateRandomString" title="core.utils.generateRandomString"><code class="xref py py-obj docutils literal notranslate"><span class="pre">generateRandomString</span></code></a>(length: int = 13) → str</p></td>
<td><p>Return a string containing random characters of given <em>length</em>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#core.utils.getCurrentUser" title="core.utils.getCurrentUser"><code class="xref py py-obj docutils literal notranslate"><span class="pre">getCurrentUser</span></code></a>()</p></td>
<td><p>Retrieve current user, if logged in.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#core.utils.markFileForDeletion" title="core.utils.markFileForDeletion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">markFileForDeletion</span></code></a>(dlkey)</p></td>
<td><p>Adds a marker to the data store that the file specified as <em>dlkey</em> can be deleted.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#core.utils.escapeString" title="core.utils.escapeString"><code class="xref py py-obj docutils literal notranslate"><span class="pre">escapeString</span></code></a>(val, maxLength=254)</p></td>
<td><p>Quotes several characters and removes “\n” and “\0” to prevent XSS injection.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#core.utils.hmacSign" title="core.utils.hmacSign"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hmacSign</span></code></a>(data: Any) → str</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#core.utils.hmacVerify" title="core.utils.hmacVerify"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hmacVerify</span></code></a>(data: Any, signature: str) → bool</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#core.utils.downloadUrlFor" title="core.utils.downloadUrlFor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">downloadUrlFor</span></code></a>(folder: str, fileName: str, derived: bool = False, expires: Union[(timedelta, None)] = timedelta(hours=1)) → str</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#core.utils.seoUrlToEntry" title="core.utils.seoUrlToEntry"><code class="xref py py-obj docutils literal notranslate"><span class="pre">seoUrlToEntry</span></code></a>(module, entry=None, skelType=None, language=None)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#core.utils.seoUrlToFunction" title="core.utils.seoUrlToFunction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">seoUrlToFunction</span></code></a>(module, function, render=None)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#core.utils.normalizeKey" title="core.utils.normalizeKey"><code class="xref py py-obj docutils literal notranslate"><span class="pre">normalizeKey</span></code></a>(key: Union[(None, 'db.KeyClass')]) → Union[(None, 'db.KeyClass')]</p></td>
<td><p>Normalizes a datastore key (replacing _application with the current one)</p></td>
</tr>
</tbody>
</table>
<dl class="py data">
<dt id="core.utils.currentRequest">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">currentRequest</span></code><a class="headerlink" href="#core.utils.currentRequest" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt id="core.utils.currentRequestData">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">currentRequestData</span></code><a class="headerlink" href="#core.utils.currentRequestData" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt id="core.utils.currentSession">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">currentSession</span></code><a class="headerlink" href="#core.utils.currentSession" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt id="core.utils.currentLanguage">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">currentLanguage</span></code><a class="headerlink" href="#core.utils.currentLanguage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt id="core.utils.projectBasePath">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">projectBasePath</span></code><a class="headerlink" href="#core.utils.projectBasePath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt id="core.utils.isLocalDevelopmentServer">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">isLocalDevelopmentServer</span></code><a class="headerlink" href="#core.utils.isLocalDevelopmentServer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="core.utils.utcNow">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">utcNow</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#core.utils.utcNow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="core.utils.generateRandomString">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">generateRandomString</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">13</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="headerlink" href="#core.utils.generateRandomString" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string containing random characters of given <em>length</em>.
Its safe to use this string in URLs or HTML.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>length</strong> (<em>int</em>) – The desired length of the generated string.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string with random characters of the given length.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="core.utils.getCurrentUser">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">getCurrentUser</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#core.utils.getCurrentUser" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve current user, if logged in.</p>
<p>If a user is logged in, this function returns a dict containing user data.</p>
<p>If no user is logged in, the function returns None.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict | bool</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dict containing information about the logged-in user, None if no user is logged in.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="core.utils.markFileForDeletion">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">markFileForDeletion</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dlkey</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#core.utils.markFileForDeletion" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a marker to the data store that the file specified as <em>dlkey</em> can be deleted.</p>
<p>Once the mark has been set, the data store is checked four times (default: every 4 hours)
if the file is in use somewhere. If it is still in use, the mark goes away, otherwise
the mark and the file are removed from the datastore. These delayed checks are necessary
due to database inconsistency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dlkey</strong> (<em>str</em>) – Unique download-key of the file that shall be marked for deletion.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="core.utils.escapeString">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">escapeString</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxLength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">254</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#core.utils.escapeString" title="Permalink to this definition">¶</a></dt>
<dd><p>Quotes several characters and removes “\n” and “\0” to prevent XSS injection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>val</strong> (<em>str</em>) – The value to be escaped.</p></li>
<li><p><strong>maxLength</strong> (<em>int</em>) – Cut-off after maxLength characters. A value of 0 means “unlimited”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The quoted string.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="core.utils.hmacSign">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">hmacSign</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="headerlink" href="#core.utils.hmacSign" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="core.utils.hmacVerify">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">hmacVerify</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signature</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="headerlink" href="#core.utils.hmacVerify" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="core.utils.downloadUrlFor">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">downloadUrlFor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">derived</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expires</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">timedelta</span><span class="p"><span class="pre">,</span> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">timedelta(hours=1)</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="headerlink" href="#core.utils.downloadUrlFor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="core.utils.seoUrlToEntry">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">seoUrlToEntry</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">entry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skelType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">language</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#core.utils.seoUrlToEntry" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="core.utils.seoUrlToFunction">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">seoUrlToFunction</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">render</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#core.utils.seoUrlToFunction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="core.utils.normalizeKey">
<code class="sig-prename descclassname"><span class="pre">core.utils.</span></code><code class="sig-name descname"><span class="pre">normalizeKey</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">db.KeyClass</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">db.KeyClass</span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#core.utils.normalizeKey" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalizes a datastore key (replacing _application with the current one)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> – Key to be normalized.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Normalized key in string representation.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Mausbrand Informationssysteme GmbH.
      <span class="lastupdated">
        Last updated on Mar 12, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>