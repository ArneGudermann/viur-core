

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Basic concepts &mdash; ViUR Core 3.0.0-b1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Troubleshooting" href="20_troubleshooting.html" />
    <link rel="prev" title="Getting started" href="10_start.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ViUR Core
          

          
          </a>

          
            
            
              <div class="version">
                3.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">ViUR Core</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="05_intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_start.html">Getting started</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Basic concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#folder-structure">Folder structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#skeletons-and-bones">Skeletons and bones</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prototypes-and-modules">Prototypes and modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#renderers">Renderers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="20_troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../doc_guide/index.html">Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc_tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/index.html">API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ViUR Core</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Getting started</a> &raquo;</li>
        
      <li>Basic concepts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/doc_start/15_basics.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="basic-concepts">
<h1>Basic concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline">¶</a></h1>
<p>This part of the documentation targets to the basic architecture behind ViUR, and describes how the system is made up and how things work together. Those who are new to ViUR and want to write applications with it, should start here.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>On the first view, ViUR is a modern implementation of the traditional Model-View-Controller (MVC) design pattern. But ViUR is also much more. It helps to quickly implement new, even complex data models using pre-defined but highly customizable controllers and viewers.</p>
<div class="figure align-default" id="id1">
<a class="reference internal image-reference" href="../_images/basics-overview.png"><img alt="This is a picture of the ViUR MVC architecture." src="../_images/basics-overview.png" style="width: 777.0px; height: 426.0px;" /></a>
<p class="caption"><span class="caption-text">The model-view-controller concept of ViUR.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>The graphic above shows the different parts of the MVC-concept and their relation to each other.
Let’s section these three parts of the MVC-concept and explain them in the terms of ViUR.</p>
<ul>
<li><p>In ViUR, the <em>models</em> are called <strong>skeletons</strong>.</p>
<p>As seen from the biological point of view, a skeleton is a collection of bones. Therefore, the data fields in ViUR are called <strong>bones</strong>. Bones have different specialization and features, but more about that will follow soon.</p>
</li>
<li><p>The <em>controllers</em> are called <strong>modules</strong>.</p>
<p>They form a callable module of the application, which focuses a specific data kind or task.</p>
<p>To implement modules, ViUR provides four generic <em>prototypes</em>: List, hierarchy, tree and singleton. There are many pre-built modules delivered with the ViUR server that implement standard use-cases, e.g. a user-module, including login and registration logics, or a file-module, which is a tree (like a filesystem) to store files in the cloud.</p>
</li>
<li><p>The <em>views</em> are called <strong>renderers</strong>.</p>
<p>They render the output of the modules in a specific, clearly defined way. ViUR provides different renderers for different purposes. The jinja2-renderer, for example,  connects the Jinja template engine to ViUR, to emit HTML code for websites. The JSON-render serves as a REST-API and is used by several applications and tools communicating with the ViUR system, including the admin-tools.</p>
</li>
</ul>
<p>These are the fundamental basics of the ViUR information system. It is now necessary to get deeper into these topics and arrange these three parts to get working results.</p>
</div>
<div class="section" id="folder-structure">
<h2>Folder structure<a class="headerlink" href="#folder-structure" title="Permalink to this headline">¶</a></h2>
<p>A typical ViUR application has a clearly defined folder structure.</p>
<p>This is the folder structure that is created by the setup.py utility as described in the <a class="reference internal" href="10_start.html"><span class="doc">Getting started</span></a> section.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>project
├── app.yaml
├── cron.yaml
├── project.py
├── emails/
├── html/
├── index.yaml
├── modules/
├── server/
├── skeletons/
├── static/
├── translations/
└── vi/
</pre></div>
</div>
<p>The following tables gives some short information about each file/folder and their description.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 95%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File / folder</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>app.yaml</p></td>
<td><p>This is the Google App Engine main configuration file for the application.</p>
<p>It contains information about how to trigger the application, which folders are exposed in which way and which libraries are used.</p>
</td>
</tr>
<tr class="row-odd"><td><p>cron.yaml</p></td>
<td><p>This is a Google App Engine cron tasks configuration file.</p></td>
</tr>
<tr class="row-even"><td><p>project.py</p></td>
<td><p>This Python script is the application’s main entry. It is project-specific and normally the place where configuration parameters or specialized settings can be done.</p>
<p>This file is automatically named after the project, and referred by app.yaml.</p>
</td>
</tr>
<tr class="row-odd"><td><p>emails/</p></td>
<td><p>Template folder for emails. Not necessary for now.</p></td>
</tr>
<tr class="row-even"><td><p>html/</p></td>
<td><p>Template folder for the HTML-templates rendered by the Jinja2 template engine.</p></td>
</tr>
<tr class="row-odd"><td><p>index.yaml</p></td>
<td><p>This is an (mostly) automatically managed configuration file for the Google Datastore describing compound indexes for entity kinds in the database. These indexes are required for more complex queries on data, but will also be discussed later.</p></td>
</tr>
<tr class="row-even"><td><p>modules/</p></td>
<td><p>This is the folder where the applications modules code remains.</p>
<p>Usually, every module is separated into one single Python file here, but it can also be split or merged, depending on the implementation.</p>
</td>
</tr>
<tr class="row-odd"><td><p>server/</p></td>
<td><p>This is the ViUR server as downloaded from <a class="reference external" href="https://viur.dev">https://viur.dev</a>.</p>
<p>It serves as a library for the entire application and provides all requirements for the ViUR system.</p>
<p>This folder can be updated to a newer server version without changing the behavior of the application, except it is necessary (please read the updating guidelines, if so).</p>
</td>
</tr>
<tr class="row-even"><td><p>skeletons/</p></td>
<td><p>Like the modules folder, this is the place where the skeletons for the data models are put.</p>
<p>Usually, one Python file for every skeleton, but this is also only an advise.</p>
</td>
</tr>
<tr class="row-odd"><td><p>static/</p></td>
<td><p>This folder is used for static files that are served by the applications when providing a HTML-frontend. CSS, images, JavaScripts, meta-files and fonts are stored here.</p></td>
</tr>
<tr class="row-even"><td><p>translations/</p></td>
<td><p>When multi-language support is wanted, this folder contains simple Python files which hold the translation of static texts to be replaced by their particular language. Its not important for now.</p></td>
</tr>
<tr class="row-odd"><td><p>vi/</p></td>
<td><p>Contains the Vi.</p>
<p>Vi is an HTML5-based administration interface to access the ViUR system’s modules and its data. The Vi is some kind of backend for ViUR, but it could also be the front-end of the application - this all depends on what the ViUR system implements in its particular application.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When a project is created from our <a class="reference external" href="https://github.com/viur-framework/base">base repository</a>, the same structure
can be found in the <a class="reference external" href="https://github.com/viur-framework/base/tree/develop/deploy">deploy/</a> folder, which is the part that is later deployed to Google App Engine.</p>
</div>
</div>
<div class="section" id="skeletons-and-bones">
<h2>Skeletons and bones<a class="headerlink" href="#skeletons-and-bones" title="Permalink to this headline">¶</a></h2>
<p>Skeletons are the data models of a ViUR application. They describe, how and in which ways information in the database is stored and loaded. Skeletons are derived from the class <a class="reference internal" href="../autoapi/core/skeleton/index.html#core.skeleton.Skeleton" title="core.skeleton.Skeleton"><code class="xref py py-class docutils literal notranslate"><span class="pre">Skeleton</span></code></a>.</p>
<p>The skeletons are made of bones. A bone is the instance of a bone class and references to a data field in the resulting data document. It performs data validity checks, serialization to and deserialization from the database and reading data from the clients.</p>
<div class="figure align-default" id="id2">
<a class="reference internal image-reference" href="../_images/basics-skeleton.png"><img alt="A picture showing how Skeletons work." src="../_images/basics-skeleton.png" style="width: 889.1999999999999px; height: 266.4px;" /></a>
<p class="caption"><span class="caption-text">Skeletons and their binding to the datastore entity and the user interface.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The skeleton shown in the graphic above is defined in a file <code class="docutils literal notranslate"><span class="pre">person.py</span></code> which is stored in the <code class="docutils literal notranslate"><span class="pre">skeletons/</span></code> folder of the project.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">skeletons/person.py</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#-*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">server.skeleton</span> <span class="kn">import</span> <span class="n">Skeleton</span>
<span class="kn">from</span> <span class="nn">server.bones</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">personSkel</span><span class="p">(</span><span class="n">Skeleton</span><span class="p">):</span>
   <span class="n">name</span> <span class="o">=</span> <span class="n">stringBone</span><span class="p">(</span><span class="n">descr</span><span class="o">=</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
   <span class="n">age</span> <span class="o">=</span> <span class="n">numericBone</span><span class="p">(</span><span class="n">descr</span><span class="o">=</span><span class="s2">&quot;Age&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>That’s it. When this Skeleton is connected to a module later on, ViUR’s admin tools like the Vi automatically provide an auto-generated input mask on it.</p>
<p>A Skeleton does automatically provide the bone <code class="docutils literal notranslate"><span class="pre">key</span></code> also, which is an instance of the class <a class="reference internal" href="../autoapi/core/bones/bone/index.html#core.bones.bone.baseBone" title="core.bones.bone.baseBone"><code class="xref py py-class docutils literal notranslate"><span class="pre">baseBone</span></code></a>. This bone holds the value of the unique entity key, that is required to uniquely identify an entity within the database. The pre-defined bones <code class="docutils literal notranslate"><span class="pre">creationdate</span></code> and <code class="docutils literal notranslate"><span class="pre">changedate</span></code> of each skeleton store the date and time when the entity was created or changed. In terms of ViUR, an entity is a document or dataset in the datastore, that stores information.</p>
<p>By default, ViUR provides the following base classes of bones that can be used immediately:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../autoapi/core/bones/booleanBone/index.html#core.bones.booleanBone.booleanBone" title="core.bones.booleanBone.booleanBone"><code class="xref py py-class docutils literal notranslate"><span class="pre">booleanBone</span></code></a> for <code class="docutils literal notranslate"><span class="pre">bool</span></code> values,</p></li>
<li><p><a class="reference internal" href="../autoapi/core/bones/dateBone/index.html#core.bones.dateBone.dateBone" title="core.bones.dateBone.dateBone"><code class="xref py py-class docutils literal notranslate"><span class="pre">dateBone</span></code></a> for <code class="xref py py-class docutils literal notranslate"><span class="pre">date</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">time</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code> values,</p></li>
<li><p><a class="reference internal" href="../autoapi/core/bones/numericBone/index.html#core.bones.numericBone.numericBone" title="core.bones.numericBone.numericBone"><code class="xref py py-class docutils literal notranslate"><span class="pre">numericBone</span></code></a> for <code class="docutils literal notranslate"><span class="pre">float</span></code> and <code class="docutils literal notranslate"><span class="pre">int</span></code> values,</p></li>
<li><p><a class="reference internal" href="../autoapi/core/bones/relationalBone/index.html#core.bones.relationalBone.relationalBone" title="core.bones.relationalBone.relationalBone"><code class="xref py py-class docutils literal notranslate"><span class="pre">relationalBone</span></code></a> to store a relation to other datastore objects with a full integration into ViUR,</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">selectOneBone</span></code> for fields that allow for a single-selection of key-value pairs,</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">selectMultiBone</span></code> for fields that allow for a multi-selection of key-value pairs,</p></li>
<li><p><a class="reference internal" href="../autoapi/core/bones/stringBone/index.html#core.bones.stringBone.stringBone" title="core.bones.stringBone.stringBone"><code class="xref py py-class docutils literal notranslate"><span class="pre">stringBone</span></code></a> for strings or list of strings,</p></li>
<li><p><a class="reference internal" href="../autoapi/core/bones/textBone/index.html#core.bones.textBone.textBone" title="core.bones.textBone.textBone"><code class="xref py py-class docutils literal notranslate"><span class="pre">textBone</span></code></a> for HTML-formatted content.</p></li>
</ul>
<p>This is only a list of the most commonly used bones. There are much more specialized, pre-defined bones that can be used.
Please refer the <a class="reference internal" href="../autoapi/core/bones/index.html#module-core.bones" title="core.bones"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bones</span> <span class="pre">API</span> <span class="pre">reference</span></code></a> for all provided classes and options.</p>
</div>
<div class="section" id="prototypes-and-modules">
<h2>Prototypes and modules<a class="headerlink" href="#prototypes-and-modules" title="Permalink to this headline">¶</a></h2>
<p>Modules are the controllers of a ViUR application, and implement the application logic. To implement modules, ViUR provides four basic prototypes. These are <a class="reference internal" href="../autoapi/core/prototypes/list/index.html#core.prototypes.list.List" title="core.prototypes.list.List"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>, <a class="reference internal" href="../autoapi/core/prototypes/singleton/index.html#core.prototypes.singleton.Singleton" title="core.prototypes.singleton.Singleton"><code class="xref py py-class docutils literal notranslate"><span class="pre">Singleton</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Hierarchy</span></code> and <a class="reference internal" href="../autoapi/core/prototypes/tree/index.html#core.prototypes.tree.Tree" title="core.prototypes.tree.Tree"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tree</span></code></a>.</p>
<table class="icon-table docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 95%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../_images/list.svg"><img alt="icon_list" height="45px" src="../_images/list.svg" width="45px" /></a></p></td>
<td><p><a class="reference internal" href="../autoapi/core/prototypes/list/index.html#core.prototypes.list.List" title="core.prototypes.list.List"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a> is the most commonly used prototype. It implement a flat collection of datasets of the same kind, which can be granulated using filters to particular selections. This prototype is used in most cases, and can be seen like a database table in a relational database management system.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_images/singleton.svg"><img alt="icon_singleton" height="45px" src="../_images/singleton.svg" width="45px" /></a></p></td>
<td><p><a class="reference internal" href="../autoapi/core/prototypes/singleton/index.html#core.prototypes.singleton.Singleton" title="core.prototypes.singleton.Singleton"><code class="xref py py-class docutils literal notranslate"><span class="pre">Singleton</span></code></a> is a prototype for implementing modules that hold only one single dataset entry. It can be used for modules that implement application-global settings or a per-user configuration.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../_images/hierarchy.svg"><img alt="icon_hierarchy" height="45px" src="../_images/hierarchy.svg" width="45px" /></a></p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">&lt;Hierarchycore.prototypes.hierarchy.Hierarchy&gt;</span></code> is a prototype for a module that stores its data in a hierarchical structure, where every dataset can be a child of another dataset or can have its own children.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../_images/tree.svg"><img alt="icon_tree" height="45px" src="../_images/tree.svg" width="45px" /></a></p></td>
<td><p><a class="reference internal" href="../autoapi/core/prototypes/tree/index.html#core.prototypes.tree.Tree" title="core.prototypes.tree.Tree"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tree</span></code></a> is used for implementing modules that store their data in a hierarchy, but differ between nodes and children. The most common usage is the <a class="reference internal" href="../autoapi/core/modules/file/index.html#core.modules.file.File" title="core.modules.file.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">core.modules.file.File</span></code></a> module, where nodes (Folders) and leafs (Files) are distinguished.</p></td>
</tr>
</tbody>
</table>
<p>ViUR comes with some build-in modules for different application cases:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../autoapi/core/modules/file/index.html#core.modules.file.File" title="core.modules.file.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> implements a file management module,</p></li>
<li><p><a class="reference internal" href="../autoapi/core/modules/user/index.html#core.modules.user.User" title="core.modules.user.User"><code class="xref py py-class docutils literal notranslate"><span class="pre">User</span></code></a> implements a user login, authentication and management module,</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Cart</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Order</span></code> implement modules for submitting and managing orders in a web-shop,</p></li>
<li><p><a class="reference internal" href="../autoapi/core/modules/page/index.html#core.modules.page.Page" title="core.modules.page.Page"><code class="xref py py-class docutils literal notranslate"><span class="pre">Page</span></code></a> implements a simple content management module.</p></li>
</ul>
<p>By subclassing these modules, custom modifications and extensions can be implemented for any use-case. In most cases, applications make use of custom modules which base on one of the prototypes as described above.</p>
<p>To connect the Skeleton <code class="docutils literal notranslate"><span class="pre">personSkel</span></code> defined above with a module implementing a list, the following few lines of code are necessary.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">modules/person.py</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#-*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">server.prototypes</span> <span class="kn">import</span> <span class="n">List</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">List</span><span class="p">):</span>
   <span class="k">pass</span>
</pre></div>
</div>
</div>
<p>Putting this into a file <code class="docutils literal notranslate"><span class="pre">person.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">modules/</span></code> folder of the project is all what is required to load or save information using the Vi. The screenshots below demonstrate, that datasets are shown using the list module…</p>
<a class="reference internal image-reference" href="../_images/basics-vi.png"><img alt="The Vi in action: Showing a list module." src="../_images/basics-vi.png" style="width: 760.1999999999999px; height: 342.59999999999997px;" /></a>
<p>…and the input mask is then generated from the skeleton, on editing or adding actions.</p>
<a class="reference internal image-reference" href="../_images/basics-vi2.png"><img alt="The Vi in action: Editing an entry." src="../_images/basics-vi2.png" style="width: 750.6px; height: 372.59999999999997px;" /></a>
</div>
<div class="section" id="renderers">
<h2>Renderers<a class="headerlink" href="#renderers" title="Permalink to this headline">¶</a></h2>
<p>The renderers are the viewer part of ViUR’s MVC concept.</p>
<p>ViUR provides various build-in renderers, but they can also be extended, sub-classed or entirely rewritten, based on the demands of the project.</p>
<p>The default renderer in ViUR is <code class="docutils literal notranslate"><span class="pre">html</span></code>, which is a binding to the powerful <a class="reference external" href="http://jinja.pocoo.org/">Jinja2 template engine</a> to generate HTML output. Jinja2 is used because it has a powerful inheritance mechanism, build-in control structures and can easily be extended to custom functions. Please refer to the Jinja2 documentation to get an overview about its features and handling. Any template files related to the jinja2 renderer are located in the folder <code class="docutils literal notranslate"><span class="pre">html/</span></code> within the project structure.</p>
<p>Let’s create two simple HTML templates to render the list of persons and to show one person entry. First, the listing template is stored as <code class="docutils literal notranslate"><span class="pre">person_list.html</span></code> into the <code class="docutils literal notranslate"><span class="pre">html/</span></code>-folder.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">html/person_list.html</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>{% extends &quot;index.html&quot; %}

{% block content %}
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    {% for skel in skellist %}
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/person/view/{{skel.key}}&quot;</span><span class="p">&gt;</span>{{skel.name}}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> is {{skel.age}} year{{&quot;s&quot; if skel.age != 1 }} old
        <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    {% endfor %}
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
{% endblock %}
</pre></div>
</div>
</div>
<p>Then, the single entry viewing template is stored as <code class="docutils literal notranslate"><span class="pre">person_view.html</span></code> into the <code class="docutils literal notranslate"><span class="pre">html/</span></code>-folder.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">html/person_view.html</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>{% extends &quot;index.html&quot; %}

{% block content %}
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{skel.name}}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Entity:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{skel.key}}<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Age:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{skel.age}}<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Created at: <span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{skel.creationdate.strftime(&quot;%Y-%m-%d %H:%M&quot;)}}<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>Modified at: <span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{skel.changedate.strftime(&quot;%Y-%m-%d %H:%M&quot;)}}
{% endblock %}
</pre></div>
</div>
</div>
<p>To connect the <code class="docutils literal notranslate"><span class="pre">Person</span></code> module from above with these templates, it needs to be configured this way:</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">modules/person.py</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#-*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">server.prototypes</span> <span class="kn">import</span> <span class="n">List</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">List</span><span class="p">):</span>
   <span class="n">viewTemplate</span> <span class="o">=</span> <span class="s2">&quot;person_view&quot;</span> <span class="c1"># Name of the template to view one entry</span>
   <span class="n">listTemplate</span> <span class="o">=</span> <span class="s2">&quot;person_list&quot;</span> <span class="c1"># Name of the template to list entries</span>

   <span class="k">def</span> <span class="nf">listFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">):</span>
      <span class="k">return</span> <span class="nb">filter</span> <span class="c1"># everyone can see everything!</span>
</pre></div>
</div>
</div>
<p>But how to call these templates now from the frontend? Requests to a ViUR application are performed by a clear and persistent format of how the resulting URLs are made up. By requesting <a class="reference external" href="https://hello-viur.appspot.com/person/list">https://hello-viur.appspot.com/person/list</a> on a ViUR system, for example, the contents from the database are fetched by the <code class="docutils literal notranslate"><span class="pre">Person</span></code> module, and rendered using the listing template from above. This template then links to the URLs of the template that displays a single person entry, with additional information.</p>
<p>[screenshot follows]</p>
<p>So what happens here? By calling <code class="docutils literal notranslate"><span class="pre">/person/list</span></code> on the server, ViUR first selects the module <code class="docutils literal notranslate"><span class="pre">person</span></code> (all in lower-case order) from its imported modules and then calls the function <a class="reference internal" href="../autoapi/core/prototypes/list/index.html#core.prototypes.list.List.list" title="core.prototypes.list.List.list"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list</span></code></a>, which is a build-in function of the <a class="reference internal" href="../autoapi/core/prototypes/list/index.html#core.prototypes.list.List" title="core.prototypes.list.List"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a> module prototype. Because no explicit renderer was specified, the HTML-renderer <code class="docutils literal notranslate"><span class="pre">jinja2</span></code> is automatically selected, and renders the template specified by the <code class="docutils literal notranslate"><span class="pre">listTemplate</span></code> attribute assigned within the module. Same as with the viewing  function for a single entry: ViUR first selects the <code class="docutils literal notranslate"><span class="pre">person</span></code> module and then calls the build-in function <a class="reference internal" href="../autoapi/core/prototypes/list/index.html#core.prototypes.list.List.view" title="core.prototypes.list.List.view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">view</span></code></a>. The <a class="reference internal" href="../autoapi/core/prototypes/list/index.html#core.prototypes.list.List.view" title="core.prototypes.list.List.view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">view</span></code></a> function has one required parameter, which is the unique entity key of the entry requested.</p>
<p>You can simply attach other renders to a module by whitelisting it.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">modules/person.py</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#-*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">server.prototypes</span> <span class="kn">import</span> <span class="n">List</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">List</span><span class="p">):</span>
   <span class="n">viewTemplate</span> <span class="o">=</span> <span class="s2">&quot;person_view&quot;</span> <span class="c1"># Name of the template to view one entry</span>
   <span class="n">listTemplate</span> <span class="o">=</span> <span class="s2">&quot;person_list&quot;</span> <span class="c1"># Name of the template to list entries</span>

   <span class="k">def</span> <span class="nf">listFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">filter</span><span class="p">):</span>
      <span class="k">return</span> <span class="nb">filter</span> <span class="c1"># everyone can see everything!</span>

<span class="n">Person</span><span class="o">.</span><span class="n">json</span> <span class="o">=</span> <span class="kc">True</span> <span class="c1">#grant module access to json renderer also</span>
</pre></div>
</div>
</div>
<p>If we granted module access also for the <code class="docutils literal notranslate"><span class="pre">json</span></code> renderer above, the same list can also be rendered as a well-formed JSON data structure by calling <a class="reference external" href="https://hello-viur.appspot.com/json/person/list">https://hello-viur.appspot.com/json/person/list</a>. The <code class="docutils literal notranslate"><span class="pre">json</span></code> as the first selector in the path selects the different renderer that should be used.</p>
<p>ViUR has a build-in access control management. By default, only users with the “root” access right or corresponding module
access rights are allowed to view or modify any data. In the module above, this default behavior is canceled by overriding
the function <a class="reference internal" href="../autoapi/core/prototypes/list/index.html#core.prototypes.list.List.listFilter" title="core.prototypes.list.List.listFilter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">listFilter</span></code></a>.
It returns a database filter for <a class="reference internal" href="../autoapi/core/prototypes/list/index.html#core.prototypes.list.List.list" title="core.prototypes.list.List.list"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list</span></code></a> function.
If None is returned, access is denied completely. Otherwhise ViUR will only list entries matching that filter.
As we just return the incoming filter object, information of this module can be seen by everyone.
Any other operations, like creating, editing or deleting entries, is still only granted to users with corresponding access rights.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="20_troubleshooting.html" class="btn btn-neutral float-right" title="Troubleshooting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="10_start.html" class="btn btn-neutral float-left" title="Getting started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Mausbrand Informationssysteme GmbH.
      <span class="lastupdated">
        Last updated on Mar 12, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>