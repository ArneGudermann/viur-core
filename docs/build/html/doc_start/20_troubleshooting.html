

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Troubleshooting &mdash; ViUR Core 3.0.0-b1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reference Guide" href="../doc_guide/index.html" />
    <link rel="prev" title="Basic concepts" href="15_basics.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ViUR Core
          

          
          </a>

          
            
            
              <div class="version">
                3.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">ViUR Core</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="05_intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_start.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="15_basics.html">Basic concepts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#my-new-project-did-not-create-an-admin-user-when-deployed">My new project did not create an admin user when deployed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-have-data-inside-the-datastore-but-my-query-doesn-t-find-and-return-it">I have data inside the datastore, but my query doesn’t find and return it</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-got-unicode-encode-decode-errors-in-my-templates">I got unicode encode/decode errors in my templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-got-some-wired-exception-in-my-templates-im-unable-to-spot">I got some wired exception in my templates im unable to spot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#internationalization-i18n-does-not-work">Internationalization (i18n) does not work</a></li>
<li class="toctree-l3"><a class="reference internal" href="#still-lost">Still lost?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../doc_guide/index.html">Reference Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc_tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/index.html">API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ViUR Core</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Getting started</a> &raquo;</li>
        
      <li>Troubleshooting</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/doc_start/20_troubleshooting.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="troubleshooting">
<h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h1>
<p>In this chapter will show you various pitfalls you might encounter when using ViUR, explain whats the root cause and
how to sort things out.</p>
<div class="section" id="my-new-project-did-not-create-an-admin-user-when-deployed">
<h2>My new project did not create an admin user when deployed<a class="headerlink" href="#my-new-project-did-not-create-an-admin-user-when-deployed" title="Permalink to this headline">¶</a></h2>
<p>ViUR schedules a task that will ensure that there is at least one user in your user table on instance startup.
If you just fired up your new project and you did not get an email with credentials it’s usually one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>You did not use/import the user module or you have an syntax error that prevents the project from starting at all</p></li>
<li><p>The deferred task had not kicked off yet. Either, there is no instance started yet (opening &lt;your appid&gt;.appspot.com
in your browser will kick one off) or the default queue is still suspended. The task queue will start a few
minutes after your first deployment.</p></li>
<li><p>You are missing indexes required to check/create a new user. Start your project at least once locally to ensure
the required indexes are written to index.yaml. Then wait until these indexes are build and ready to serve.</p></li>
<li><p>There had been a race condition between the first requirements that caused the user to be created but stopped the
mail from being sent. Wait until these requirements are settled, then (using the cloud console) delete the user
and the user-uniquePropertyIndex from the datastore, flush the memcache and kill all instances currently running.
As soon as a new instance starts up, a new admin user is created.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="i-have-data-inside-the-datastore-but-my-query-doesn-t-find-and-return-it">
<h2>I have data inside the datastore, but my query doesn’t find and return it<a class="headerlink" href="#i-have-data-inside-the-datastore-but-my-query-doesn-t-find-and-return-it" title="Permalink to this headline">¶</a></h2>
<p>First of all, check the logs. If there is anything wrong with your model preventing this query from succeeding, ViUR
will usually warn you. Look for lines complaining about “Invalid filtering”, “Invalid searchfilter” or
“Invalid ordering”. In case of relationalBones ViUR will also tell you wherever it expected an property named in
ref-/rel- Keys. Did you set an property to indexed=True or included it in ref-/rel- Keys after data had already been
written to the datastore? Use the rebuild search index task (vi –&gt; gear icon top right or
admin –&gt; “tasks” in your menu bar) to update data already in the datastore.
Check if you have the permission to retrieve that entry. Verify that the listFilter() function in your module doesn’t
alter your query in a way that excludes these entries. Did you use query.filter() somewhere in your query? It does <em>not</em>
perform any error/type-checking. Check that your types match: qry.filter(“test =”, str(“5”)) is <em>not</em> equivalent to
qry.filter(“test =”, int(5)). If in doubt, check the entry, the types of it’s values and wherever properties are indexed
using the cloud console. Temporary rewrite your query to use .mergeExternalFilter() and see if that succeeds.
If you had still no luck; set “viur.debug.traceQueries” in server.config to True. It will log the raw filters and
orderings send to the datastore (and wherever it yields any results). Verify that the query looks like expected, then
manually run that query in the cloud console using GQL.</p>
</div>
<div class="section" id="i-got-unicode-encode-decode-errors-in-my-templates">
<h2>I got unicode encode/decode errors in my templates<a class="headerlink" href="#i-got-unicode-encode-decode-errors-in-my-templates" title="Permalink to this headline">¶</a></h2>
<p>ViUR is designed to handle unicode data. This usually happens if you supply non-unicode data that contains non-ascii
characters. Check your models that this template accesses. You’ll probably miss the <em>u</em> (unicode marker) in a bone
description, somewhere in it’s params or in the values in case of selectOne/selectMulti bones. So check it always reads
descr=u”My description” instead of descr=”My description” in your bone definitions.</p>
</div>
<div class="section" id="i-got-some-wired-exception-in-my-templates-im-unable-to-spot">
<h2>I got some wired exception in my templates im unable to spot<a class="headerlink" href="#i-got-some-wired-exception-in-my-templates-im-unable-to-spot" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you’ll get miss-leading tracebacks from the template engine where the traceback points to a totally different
and unrelated location. To nail down the root cause first remove the extends-clause from your template (if any).
Check if the issue still persists. If not, you’re looking at the wrong template.
Then remove all begin block/end block markers from the template. If still no clue, remove macro imports (and calls).
If the issue still persists, it’s usually triggered by a call to a server-side function, that itself tried to load and
parse another template. Usual suspects are execRequest() calls which embed other fragments. Enabling “viur.disableCache”
in the config helps tracing exceptions that appear infrequently.</p>
</div>
<div class="section" id="internationalization-i18n-does-not-work">
<h2>Internationalization (i18n) does not work<a class="headerlink" href="#internationalization-i18n-does-not-work" title="Permalink to this headline">¶</a></h2>
<p>Verify that you selected a method for ViUR to determine the language acceptable for the current request
(check server.config[“viur.languageMethod”]). Working with different domains does not work on the development server,
the session (cookie) approach does not work for search engines like google. Check that your project has a “translations”
module, it contains tables for the languages you’ll need and that it’s importable without exception. Then ensure that
server.config[“viur.availableLanguages”] is filled (<em>after</em> server.setup() had been called).</p>
</div>
<div class="section" id="still-lost">
<h2>Still lost?<a class="headerlink" href="#still-lost" title="Permalink to this headline">¶</a></h2>
<p>Feel free to join our IRC channel #viur on freenode <a class="reference external" href="https://webchat.freenode.net?channels=viur&amp;uio=d4">https://webchat.freenode.net?channels=viur&amp;uio=d4</a> and ask your
project-specific questions.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../doc_guide/index.html" class="btn btn-neutral float-right" title="Reference Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="15_basics.html" class="btn btn-neutral float-left" title="Basic concepts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Mausbrand Informationssysteme GmbH.
      <span class="lastupdated">
        Last updated on Mar 12, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>